window.wp=window.wp||{};var passwordStrength;!function(a){wp.passwordStrength={meter:function(b,c,d){if(a.isArray(c)||(c=[c.toString()]),b!=d&&d&&d.length>0)return 5;if("undefined"==typeof window.zxcvbn)return-1;var e=zxcvbn(b,c);return e.score},userInputBlacklist:function(){var b,c,d,e,f=[],g=[],h=["user_login","first_name","last_name","nickname","display_name","email","url","description","weblog_title","admin_email"];for(f.push(document.title),f.push(document.URL),c=h.length,b=0;b<c;b++)e=a("#"+h[b]),0!==e.length&&(f.push(e[0].defaultValue),f.push(e.val()));for(d=f.length,b=0;b<d;b++)f[b]&&(g=g.concat(f[b].replace(/\W/g," ").split(" ")));return g=a.grep(g,function(b,c){return!(""===b||4>b.length)&&a.inArray(b,g)===c})}},passwordStrength=wp.passwordStrength.meter}(jQuery),function(a){function b(){var b,c=h.val(),d=e();n.removeClass("iis-pack-short iis-pack-bad iis-pack-good iis-pack-strong"),d=d.concat(wp.passwordStrength.userInputBlacklist());var b=wp.passwordStrength.meter(c,d,c);switch(d.length=0,a("."+o).remove(),i.prop("disabled",!0),b){case-1:n.addClass("iis-pack-bad").html(iisPackJsPassw.unknown);break;case 2:n.addClass("iis-pack-bad").html(iisPackJsPassw.bad),f();break;case 3:n.addClass("iis-pack-good").html(iisPackJsPassw.good),f();break;case 4:n.addClass("iis-pack-strong").html(iisPackJsPassw.strong),i.prop("disabled",!1);break;case 5:n.addClass("iis-pack-short").html(iisPackJsPassw.mismatch);break;default:n.addClass("iis-pack-short").html(iisPackJsPassw.short)}return b}function c(){var b=iisPackJsPassw.pLength;b<12&&(b=12);var c={iispack_action:"getWordPressGeneratedPassword",length:b,special_chars:"1",extra_special_chars:"0"},e=a.post("/",c);e.done(function(a){var b=a.randpassw;d(b)})}function d(a){return"undefined"!=typeof a&&(suggested_password=a),"function"!=typeof zxcvbn?void setTimeout(d,50):void(h.val()?b():(h.val(suggested_password),b()))}function e(){var b,c,d,e,f=[],g=iisPackJsPassw.blacklist,h=[j,k,l,m];for(c=h.length,b=0;b<c;b++)e=h[b],"undefined"!=typeof e[0]&&(g.push(e[0].defaultValue),g.push(e.val()));for(d=g.length,b=0;b<d;b++)g[b]&&(f=f.concat(g[b].replace(/\W/g," ").split(" ")));return f=a.grep(f,function(b,c){return!(""===b||4>b.length)&&a.inArray(b,f)===c})}function f(){return!(""===h.val()||iisPackJsPassw.pLength>h.val().length)&&void n.after(p)}var g=".iispack-js-",h=a(g+"field-password"),i=a(g+"field-submit"),j=a(g+"field-firstname"),k=a(g+"field-lastname"),l=a(g+"field-username"),m=a(g+"field-email"),n=a(g+"strength-meter"),o="iispack-js-weak-passw",p=a('<label><input type="checkbox" name="iispack_pw_weak" class="cb-iispack-js-weak-passw"/>'+iisPackJsPassw.useUnsecure+"</label>").attr({class:o});h.is("input")||(h=h.find("input")),a(document).on({click:function(){a("."+o+" input:checkbox").prop("checked")?i.prop("disabled",!1):i.prop("disabled",!0)}},"."+o),a(document).on({input:function(){b()}},g+"field-password"),a(document).ready(function(){c()})}(jQuery);